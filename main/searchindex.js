Search.setIndex({"docnames": ["index", "introduction", "references", "register_conventions", "transfer_list"], "filenames": ["index.rst", "introduction.rst", "references.rst", "register_conventions.rst", "transfer_list.rst"], "titles": ["Firmware handoff specification", "<span class=\"section-number\">1. </span>Introduction", "<span class=\"section-number\">4. </span>References", "<span class=\"section-number\">3. </span>Register usage at handoff boundary", "<span class=\"section-number\">2. </span>Transfer list"], "terms": {"introduct": 0, "platform": [0, 2, 3, 4], "initialis": 0, "stage": [0, 4], "transfer": [0, 1, 3], "list": [0, 1, 3], "requir": [0, 1], "header": 0, "tl": [0, 1, 3], "flag": 0, "entri": [0, 1, 3], "type": 0, "alloc": 0, "standard": 0, "oper": 0, "valid": 0, "read": [0, 1], "ad": 0, "new": 0, "te": 0, "special": 0, "data": [0, 1, 2, 3], "align": 0, "creat": 0, "reloc": 0, "empti": 0, "layout": 0, "xferlist_void": 0, "fdt": [0, 3], "xferlist_fdt": 0, "hob": 0, "block": 0, "xferlist_hob_b": 0, "xferlist_hob_l": 0, "acpi": [0, 2], "tabl": [0, 3], "aggreg": 0, "xferlist_acpi_aggr": 0, "tpm": 0, "event": 0, "log": 0, "xferlist_evlog": 0, "crb": 0, "base": 0, "address": [0, 3], "xferlist_tpm_crb_bas": 0, "relat": 0, "trust": [0, 2], "mbed": 0, "heap": 0, "inform": [0, 1], "xferlist_mbedtls_heap_info": 0, "regist": [0, 1, 4], "usag": 0, "boundari": [0, 1, 4], "arm": [0, 2], "architectur": [0, 1, 2], "bind": [0, 2], "aarch64": [0, 4], "receiv": [0, 1, 4], "aarch32": 0, "refer": [0, 4], "A": [1, 2, 3, 4], "initi": [1, 2, 4], "procedur": 1, "mai": [1, 4], "involv": 1, "execut": [1, 3, 4], "sequenc": [1, 4], "firmwar": 1, "It": [1, 4], "i": [1, 3, 4], "assum": [1, 4], "onli": [1, 4], "primari": 1, "boot": [1, 2, 4], "core": [1, 2, 4], "activ": 1, "dure": [1, 4], "transit": 1, "point": [1, 3], "between": 1, "remain": [1, 4], "must": [1, 3, 4], "held": 1, "reset": 1, "The": [1, 3, 4], "distinct": [1, 4], "have": [1, 4], "specif": [1, 2, 4], "respons": [1, 4], "can": [1, 3, 4], "origin": [1, 4], "from": [1, 3, 4], "separ": [1, 4], "codebas": 1, "As": 1, "differ": [1, 4], "gener": [1, 4], "about": 1, "configur": [1, 2], "exampl": [1, 4], "ar": [1, 4], "memori": 1, "map": [1, 4], "devic": [1, 2, 4], "thi": [1, 3, 4], "later": [1, 4], "thu": 1, "propag": 1, "along": [1, 4], "chain": [1, 4], "document": [1, 3, 4], "defin": [1, 4], "structur": [1, 2, 4], "which": [1, 4], "us": [1, 2, 3, 4], "handoff": [1, 4], "an": [1, 3, 4], "feasibl": 1, "shown": [1, 4], "fig": [1, 4], "1": [1, 3, 4], "provid": [1, 3, 4], "introduc": 1, "concept": [1, 4], "free": [1, 4], "adopt": 1, "ani": [1, 4], "other": [1, 4], "depend": 1, "cold": [1, 2], "start": [1, 4], "board": 1, "control": [1, 4], "releas": 1, "applic": [1, 4], "processor": 1, "ap": 1, "process": [1, 4], "conceptu": 1, "broken": 1, "apart": 1, "follow": [1, 3, 4], "immut": 1, "obtain": [1, 4], "load": [1, 4], "authent": 1, "next": [1, 4], "ram": 1, "perform": [1, 4], "some": [1, 4], "secur": [1, 2, 4], "privileg": 1, "level": 1, "addit": [1, 4], "imag": [1, 4], "option": [1, 4], "subdivid": 1, "sub": 1, "termin": 1, "o": [1, 4], "bootload": [1, 4], "befor": [1, 4], "compos": [1, 4], "sever": 1, "produc": [1, 4], "consum": [1, 4], "section": [1, 3, 4], "2": [1, 3, 4], "append": [1, 4], "meant": 1, "contain": [1, 3, 4], "directli": 1, "access": [1, 4], "via": 1, "one": [1, 4], "flow": 1, "term": 1, "For": [1, 4], "particular": [1, 4], "hand": [1, 3], "off": [1, 3], "sender": [1, 3], "updat": [1, 4], "field": [1, 3, 4], "allow": [1, 4], "remov": [1, 4], "If": [1, 3, 4], "phase": [1, 4], "fail": 1, "previou": [1, 4], "should": [1, 4], "resum": 1, "recommend": 1, "keep": 1, "prior": 1, "either": [1, 4], "explicitli": 1, "implicitli": 1, "link": 1, "dt": 2, "devicetre": [2, 3, 4], "pi": [2, 4], "volum": 2, "3": [2, 3, 4], "share": 2, "element": 2, "uefi": 2, "forum": 2, "advanc": 2, "power": [2, 4], "interfac": [2, 4], "armarm": [2, 3], "manual": 2, "profil": 2, "ddi0487": 2, "opteecor": [2, 4], "op": 2, "tee": 2, "tfaffamb": [2, 4], "tf": [2, 4], "partit": [2, 4], "manag": [2, 4], "ff": 2, "manifest": 2, "tree": [2, 4], "tcg_efi": [2, 4], "comput": [2, 4], "group": [2, 4], "efi": [2, 4], "protocol": [2, 4], "tf_bl31": [2, 4], "bl31": [2, 4], "specifi": [3, 4], "exchang": 3, "state": [3, 4], "convent": [3, 4], "determin": [3, 4], "when": [3, 4], "In": [3, 4], "pointer": [3, 4], "64": 3, "bit": [3, 4], "tl_base_pa": [3, 4], "pass": [3, 4], "x3": 3, "x2": 3, "set": [3, 4], "0": [3, 4], "32": 3, "least": 3, "signific": 3, "x1": 3, "signatur": [3, 4], "guarante": 3, "hold": [3, 4], "39": 3, "version": [3, 4], "being": [3, 4], "17": 3, "x0": 3, "hardwar": [3, 4], "descript": [3, 4], "absent": 3, "present": [3, 4], "compat": [3, 4], "locat": [3, 4], "tag_id": [3, 4], "exist": [3, 4], "divid": 3, "31": [3, 4], "4a0f_b10b": [3, 4], "63": 3, "40": 3, "reserv": [3, 4], "zero": [3, 4], "18": 3, "r3": [3, 4], "r1": [3, 4], "24": 3, "8": [3, 4], "most": 3, "4": [3, 4], "r2": [3, 4], "r0": 3, "23": 3, "0f_b10b": 3, "whole": 4, "contigu": 4, "physic": 4, "space": 4, "all": 4, "byte": 4, "we": 4, "align8": 4, "denot": 4, "number": 4, "occupi": 4, "7": 4, "each": 4, "carri": 4, "identifi": 4, "associ": 4, "depict": 4, "first": 4, "end": 4, "second": 4, "multipl": 4, "after": 4, "store": 4, "littl": 4, "endian": 4, "order": 4, "immedi": 4, "r4": 4, "offset": 4, "nearest": 4, "preserv": 4, "begin": 4, "presenc": 4, "verifi": 4, "inspect": 4, "valu": 4, "chang": 4, "e": 4, "backward": 4, "older": 4, "reader": 4, "size": 4, "0x4": 4, "0x0": 4, "checksum": 4, "0x1": 4, "enabl": 4, "basic": 4, "protect": 4, "against": 4, "someth": 4, "overwrit": 4, "xor": 4, "over": 4, "everi": 4, "used_s": 4, "equal": 4, "purpos": 4, "calcul": 4, "note": 4, "includ": 4, "inter": 4, "pad": 4, "futur": 4, "up": 4, "total_s": 4, "uniniti": 4, "mean": 4, "exactli": 4, "same": 4, "still": 4, "0x5": 4, "describ": 4, "code": 4, "encount": 4, "higher": 4, "than": 4, "know": 4, "support": 4, "its": 4, "ignor": 4, "extra": 4, "potenti": 4, "larger": 4, "howev": 4, "unless": 4, "how": 4, "hdr_size": 4, "0x6": 4, "0x18": 4, "0x7": 4, "maximum": 4, "two": 4, "newli": 4, "so": 4, "whenev": 4, "current": 4, "0x8": 4, "within": 4, "account": 4, "plu": 4, "last": 4, "0xc": 4, "entir": 4, "spare": 4, "check": 4, "suffici": 4, "resiz": 4, "accordingli": 4, "respect": 4, "0x10": 4, "word": 4, "see": 4, "below": 4, "0x14": 4, "intend": 4, "signal": 4, "properti": 4, "accord": 4, "rule": 4, "name": 4, "has_checksum": 4, "true": 4, "indic": 4, "unus": 4, "data_s": 4, "mandatorili": 4, "travers": 4, "te_base_addr": 4, "c": 4, "languag": 4, "notat": 4, "deriv": 4, "next_base_addr": 4, "0x3": 4, "exact": 4, "expect": 4, "simpl": 4, "represent": 4, "repres": 4, "singl": 4, "logic": 4, "split": 4, "across": 4, "even": 4, "thei": 4, "re": 4, "alwai": 4, "appear": 4, "togeth": 4, "encourag": 4, "reusabl": 4, "situat": 4, "altern": 4, "complex": 4, "kind": 4, "well": 4, "establish": 4, "g": 4, "insert": 4, "occur": 4, "time": 4, "instanc": 4, "object": 4, "consid": 4, "stabl": 4, "never": 4, "incompat": 4, "wai": 4, "desir": 4, "instead": 4, "manner": 4, "long": 4, "definit": 4, "clearli": 4, "unknown": 4, "those": 4, "handl": 4, "rest": 4, "would": 4, "correct": 4, "also": 4, "expand": 4, "restrict": 4, "explicit": 4, "just": 4, "infer": 4, "mani": 4, "been": 4, "like": 4, "were": 4, "what": 4, "anyth": 4, "These": 4, "make": 4, "difficult": 4, "typic": 4, "happen": 4, "more": 4, "avail": 4, "need": 4, "region": 4, "outsid": 4, "necessari": 4, "mmio": 4, "But": 4, "avoid": 4, "itself": 4, "approach": 4, "greatest": 4, "flexibl": 4, "wish": 4, "sinc": 4, "fairli": 4, "self": 4, "without": 4, "strewn": 4, "around": 4, "where": 4, "due": 4, "project": 4, "rather": 4, "mix": 4, "Of": 4, "cours": 4, "except": 4, "belong": 4, "case": 4, "pr": 4, "submit": 4, "pull": 4, "request": 4, "repositori": 4, "add": 4, "do": 4, "submitt": 4, "try": 4, "cluster": 4, "16": 4, "256": 4, "chipset": 4, "could": 4, "adjac": 4, "predefin": 4, "0xff_f000": 4, "0xff_ffff": 4, "non": 4, "anyon": 4, "custom": 4, "strongli": 4, "discourag": 4, "local": 4, "experi": 4, "ever": 4, "close": 4, "sourc": 4, "compon": 4, "own": 4, "entiti": 4, "final": 4, "intern": 4, "implement": 4, "reason": 4, "often": 4, "emerg": 4, "organ": 4, "goal": 4, "uniqu": 4, "everyth": 4, "turn": 4, "out": 4, "anticip": 4, "you": 4, "public": 4, "open": 4, "": 4, "probabl": 4, "good": 4, "0x7f_ffff": 4, "0x80_0000": 4, "0xff_efff": 4, "extend": 4, "experiment": 4, "under": 4, "integr": 4, "track": 4, "defint": 4, "accept": 4, "detail": 4, "clarifi": 4, "variou": 4, "serv": 4, "guidelin": 4, "input": 4, "tl_base_addr": 4, "compar": 4, "On": 4, "mismatch": 4, "abort": 4, "match": 4, "outlin": 4, "modifi": 4, "smaller": 4, "switch": 4, "design": 4, "interpret": 4, "illeg": 4, "found": 4, "total": 4, "area": 4, "known": 4, "corrupt": 4, "hardcod": 4, "while": 4, "otherwis": 4, "proce": 4, "step": 4, "new_tag_id": 4, "new_data_s": 4, "encapsul": 4, "copi": 4, "fly": 4, "look": 4, "greater": 4, "rememb": 4, "old_void_data_s": 4, "skip": 4, "substep": 4, "enough": 4, "room": 4, "wa": 4, "chosen": 4, "overwritten": 4, "new_align": 4, "alignment_mask": 4, "bypass": 4, "No": 4, "don": 4, "t": 4, "touch": 4, "form": 4, "portion": 4, "again": 4, "place": 4, "available_s": 4, "now": 4, "els": 4, "write": 4, "result": 4, "target_bas": 4, "target": 4, "target_s": 4, "alignment_offset": 4, "new_tl_bas": 4, "5": 4, "6": 4, "void": 4, "intent": 4, "subsequ": 4, "freeli": 4, "behind": 4, "cover": 4, "left": 4, "void_data": 4, "flatten": 4, "complet": 4, "construct": 4, "hob_block": 4, "phit": 4, "arbitrari": 4, "enclos": 4, "constraint": 4, "hob_list": 4, "usual": 4, "writer": 4, "correctli": 4, "allign": 4, "preced": 4, "ha": 4, "length": 4, "acpi_t": 4, "One": 4, "tcg": 4, "sizeof": 4, "need_to_replai": 4, "measur": 4, "them": 4, "unabl": 4, "themselv": 4, "awar": 4, "pcr": 4, "replai": 4, "record": 4, "onc": 4, "clear": 4, "default": 4, "event_log": 4, "carv": 4, "command": 4, "buffer": 4, "crb_base_address": 4, "crb_size": 4, "xferlist_optee_pageable_part_addr": 4, "uint64_t": 4, "opte": 4, "dispatch": 4, "payload": 4, "0x100": 4, "pp_addr": 4, "xferlist_dt_spmc_manifest": 4, "attribut": 4, "node": 4, "spmd": 4, "0x101": 4, "spmc_man": 4, "xferlist_exec_ep_info64": 4, "variant": 4, "entry_point_info": 4, "pc": 4, "spsr": 4, "client": 4, "setup": 4, "environ": 4, "concret": 4, "u": 4, "mode": 4, "runtim": 4, "correspond": 4, "practic": 4, "might": 4, "combin": 4, "softwar": 4, "run": 4, "realm": 4, "0x102": 4, "ep_info": 4, "xferlist_rw_mem_layout64": 4, "convei": 4, "bl2": 4, "extent": 4, "0x104": 4, "addr": 4, "stack": 4, "intialis": 4, "0x105": 4, "heap_address": 4, "heap_siz": 4}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"firmwar": [0, 4], "handoff": [0, 3], "specif": 0, "content": [0, 4], "introduct": 1, "platform": 1, "initialis": 1, "stage": 1, "refer": 2, "regist": 3, "usag": 3, "boundari": 3, "arm": 3, "architectur": 3, "bind": 3, "aarch64": 3, "receiv": 3, "assign": 3, "aarch32": 3, "transfer": 4, "list": 4, "requir": 4, "header": 4, "tl": 4, "flag": 4, "entri": 4, "te": 4, "type": 4, "alloc": 4, "tag": 4, "id": 4, "rang": 4, "standard": 4, "oper": 4, "valid": 4, "read": 4, "ad": 4, "new": 4, "special": 4, "data": 4, "align": 4, "creat": 4, "reloc": 4, "empti": 4, "layout": 4, "xferlist_void": 4, "fdt": 4, "xferlist_fdt": 4, "hob": 4, "block": 4, "xferlist_hob_b": 4, "xferlist_hob_l": 4, "acpi": 4, "tabl": 4, "aggreg": 4, "xferlist_acpi_aggr": 4, "tpm": 4, "event": 4, "log": 4, "xferlist_evlog": 4, "crb": 4, "base": 4, "address": 4, "xferlist_tpm_crb_bas": 4, "relat": 4, "trust": 4, "op": 4, "tee": 4, "pageabl": 4, "part": 4, "dt": 4, "format": 4, "spmc": 4, "manifest": 4, "point": 4, "info": 4, "rw": 4, "memori": 4, "mbed": 4, "heap": 4, "inform": 4, "xferlist_mbedtls_heap_info": 4}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 60}, "alltitles": {"Firmware handoff specification": [[0, "firmware-handoff-specification"]], "Contents": [[0, null]], "Introduction": [[1, "introduction"]], "Platform initialisation stages": [[1, "platform-initialisation-stages"]], "References": [[2, "references"]], "Register usage at handoff boundary": [[3, "register-usage-at-handoff-boundary"]], "Arm Architecture bindings": [[3, "arm-architecture-bindings"]], "AArch64 Receiver": [[3, "aarch64-receiver"]], "AArch64 register assignment at the handoff boundary": [[3, "id4"]], "AArch32 Receiver": [[3, "aarch32-receiver"]], "AArch32 register assignment at the handoff boundary": [[3, "id5"]], "Transfer list": [[4, "transfer-list"]], "Transfer list requirements": [[4, "transfer-list-requirements"]], "Transfer list header": [[4, "transfer-list-header"]], "TL header": [[4, "id17"]], "TL Flags": [[4, "tl-flags"]], "Flags": [[4, "id18"]], "TL entry header": [[4, "tl-entry-header"]], "TE header": [[4, "id19"]], "TL Contents": [[4, "tl-contents"]], "Entry-type allocation": [[4, "entry-type-allocation"]], "Tag ID ranges": [[4, "id20"]], "Standard operations": [[4, "standard-operations"]], "Validating a TL header": [[4, "validating-a-tl-header"]], "Reading a TL": [[4, "reading-a-tl"]], "Adding a new TE": [[4, "adding-a-new-te"]], "Adding a new TE with special data alignment requirement": [[4, "adding-a-new-te-with-special-data-alignment-requirement"]], "Creating a TL": [[4, "creating-a-tl"]], "Relocating a TL": [[4, "relocating-a-tl"]], "Standard transfer entries": [[4, "standard-transfer-entries"]], "Empty entry layout (XFERLIST_VOID)": [[4, "empty-entry-layout-xferlist-void"]], "Empty type layout": [[4, "id21"]], "FDT entry layout (XFERLIST_FDT)": [[4, "fdt-entry-layout-xferlist-fdt"]], "FDT type layout": [[4, "id22"]], "HOB block entry layout (XFERLIST_HOB_B)": [[4, "hob-block-entry-layout-xferlist-hob-b"]], "HOB block type layout": [[4, "id23"]], "HOB list entry layout (XFERLIST_HOB_L)": [[4, "hob-list-entry-layout-xferlist-hob-l"]], "HOB list type layout": [[4, "id24"]], "ACPI table aggregate entry layout (XFERLIST_ACPI_AGGR)": [[4, "acpi-table-aggregate-entry-layout-xferlist-acpi-aggr"]], "ACPI table aggregate type layout": [[4, "id25"]], "TPM event log table entry layout (XFERLIST_EVLOG)": [[4, "tpm-event-log-table-entry-layout-xferlist-evlog"]], "TPM event log type layout": [[4, "id26"]], "TPM CRB base address table entry layout (XFERLIST_TPM_CRB_BASE)": [[4, "tpm-crb-base-address-table-entry-layout-xferlist-tpm-crb-base"]], "TPM CRB base type layout": [[4, "id27"]], "Entries related to Trusted Firmware": [[4, "entries-related-to-trusted-firmware"]], "OP-TEE pageable part address type layout": [[4, "id28"]], "DT formatted SPMC manifest type layout": [[4, "id29"]], "Entry point info type layout": [[4, "id30"]], "Layout for a RW memory layout entry": [[4, "id31"]], "Mbed-TLS heap information (XFERLIST_MBEDTLS_HEAP_INFO)": [[4, "mbed-tls-heap-information-xferlist-mbedtls-heap-info"]], "Mbed-TLS heap info type layout": [[4, "id32"]]}, "indexentries": {}})